当前项目为后端+合约

# 注意事项

- 合约相关文档放在 /contracts 下 README.md 中
- 接口文档放在 /doc/API.md 中
- 不需要额外构建其他的文档
- 开始工作前，请分析当前项目的所有文件和目录，了解整个项目已完成的内容

## step1 项目架构准备

1. 工具准备 logger, envPaser ✅
2. 主程序架构，唯一启动入口，可扩展模块，数据共享等 ✅
3. API 模块,统一响应处理，统一错误处理 ✅
4. API 请求封装成如下的使用方式 ✅

```typescript
@Controller("/api/example")
export class ExampleController extends BaseController {
  @Get()
  async getList(req, res, next) {
    // ... 这个方法最后会成为一个 /api/example 接口暴露出去
  }
}
```

5. 路由模块化 ✅

## step2 合约架构的实现与开发模式准备

1.  模块化合约架构 ✅

- 配置入口预留，方便后续迭代
- 配置方式安全
- 整个项目不要涉及到私钥，钱包信息前端会通过wagmi 连接钱包传递过来
- 不会使用hardhat 生成的钱包地址，所有的钱包信息只会从前端使用wagmi 链接钱包后，调用接口传递过来
- 后续设置手续费收集账户需要预留出位置，不管是从 .env 文件读取，或者在部署脚本里设置，都需要安全和方便管理

2. 完成一个测试币的合约，为后续本地链测试做准备 ✅

3. 合约测试流程 ✅

- 测试脚本可按功能分开测试
- package.json 已经配置好了命令行

4. 合约部署流程 ✅

- 合约部署需要方便，最好能一个脚本搞定
- package.json 已经配置好了命令行

5. 基于现有的架构，完成以下几个api ✅

- 可用网络列表
- 获取钱包余额
- 本地链上允许给前端链接的钱包注入资金（如果当前用户资金超过1000U，则提示用户已有充足资金，不需要再注入）

6. 本地链启动脚本或命令行 ✅

- 有时候本地链状态已经在运行，找不到终端，会重复启动，需要一个可控的脚本或命令行

## step3 资金池功能准备

1. 资金池合约（为后续策略、交易调用作准备）✅

- 用户可以创建多个资金池（创建数量要可配置，整个合约资金池总数不必限制），只能管理自己的资金池
- 删除资金池（资金自动转出，需要考虑资金过少不够支付gas 和手续费的边缘情况）
- 支持用户合并自己的资金池（有的资金池金额过小，支付不了gas和手续费，无法取出的可以合并为一个资金池）
- 资金池资金上下限不做限制
- 分配/取出资金
- 手续费收集（收集地址设置要安全方便）

2. 资金池测试 ✅

- 单独的测试文件，通过package.json 配置的 contract:test 命令统一测试

3. 资金池部署 ✅

- 基于现有的部署脚本，合并一起部署

4. 基于现有的API架构，提供资金池相关API提供 ✅

- 创建资金池
- 分配资金
- 取出资金
- 删除资金池
- 合并资金池

## step4 策略功能

1.  策略合约

- 策略配置是参数化的（如：symbol、leverage、takeProfit、stopLoss、amountLimit、maxDrawdown、freq、riskLevel 等），同一个策略逻辑可被不同参数驱动，前端只传参数。

- 用户在链上存储策略元数据（或在合约注册策略 ID 并签名参数后链下存储，执行前由 Executor 校验/读取）。

- 策略执行由离线 Executor（Node）来做，Executor 会读取链上/DB 的策略、获取市场行情、做判断并调用合约执行或调用用户的代理合约（StrategyProxy）。

- 签名（EIP-712）+ nonce/timestamp 用来防止重放与保证用户授权更安全。

- 合约侧尽量只存关键配置/索引/状态，避免频繁写大量数据以节省 gas。

- 如果用户想自定义配置触发策略判断的指标等该如何做？

2. 策略 API 提供 
